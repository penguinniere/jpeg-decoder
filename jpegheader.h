struct App0{
    int size;
    char tag[6];
    int version;
    int denseUnit;
    int xDense;
    int yDense;
    int smallXDense;
    int smallYDense;
    char *smallPic;
};typedef struct App0 App0;

struct Dqt{
    int id;
    int precision;
    int factor[8*8];
};typedef struct Dqt Dqt;

struct Sof0{
    int precision;
    int size[2]; // width, height
    int colorComp;
    int color[4*4];// id, xsample, ysameple, dqt
};typedef struct Sof0 Sof0;

struct Dri{
    int rst;
};typedef struct Dri Dri;

struct Sos{
    int colorComp;
    int color[4*3];// id dc ac
    int dummy;//@@ i don't know
};typedef struct Sos Sos;

struct Trie{
    int value;
    struct Trie *node[2];
};typedef struct Trie Trie;


int zig_zag_table[64] = {0,  1,  5,  6, 14, 15, 27, 28,
                         2,  4,  7, 13, 16, 26, 29, 42,
                         3,  8, 12, 17, 25, 30, 41, 43,
                         9, 11, 18, 24, 31, 40, 44, 53,
                         10, 19, 23, 32, 39, 45, 52, 54,
                         20, 22, 33, 38, 46, 51, 55, 60,
                         21, 34, 37, 47, 50, 56, 59, 61,
                         35, 36, 48, 49, 57, 58, 62, 63
                         };
                         
float idct_table[64]={0.7071067811865475, 0.7071067811865475, 0.7071067811865475, 0.7071067811865475, 0.7071067811865475, 0.7071067811865475, 0.7071067811865475, 0.7071067811865475,
                      0.9807852804032304, 0.8314696123025452, 0.5555702330196023, 0.19509032201612833, -0.1950903220161282, -0.555570233019602, -0.8314696123025453, -0.9807852804032304,
                      0.9238795325112867, 0.38268343236508984, -0.3826834323650897, -0.9238795325112867, -0.9238795325112868, -0.38268343236509034, 0.38268343236509, 0.9238795325112865,
                      0.8314696123025452, -0.1950903220161282, -0.9807852804032304, -0.5555702330196022, 0.5555702330196018, 0.9807852804032304, 0.19509032201612878, -0.8314696123025451,
                      0.7071067811865476, -0.7071067811865475, -0.7071067811865477, 0.7071067811865474, 0.7071067811865477, -0.7071067811865467, -0.7071067811865472, 0.7071067811865466,
                      0.5555702330196023, -0.9807852804032304, 0.1950903220161283, 0.8314696123025456, -0.8314696123025451, -0.19509032201612803, 0.9807852804032307, -0.5555702330196015,
                      0.38268343236508984, -0.9238795325112868, 0.9238795325112865, -0.3826834323650899, -0.38268343236509056, 0.9238795325112867, -0.9238795325112864, 0.38268343236508956,
                      0.19509032201612833, -0.5555702330196022, 0.8314696123025456, -0.9807852804032307, 0.9807852804032305, -0.831469612302545, 0.5555702330196014, -0.19509032201612858};

float YCbCr[3*3] = {  1, 1, 1,
                      1.772, -0.34414, 0,
                      0, -0.71414, 1.402
                      }; //bgr